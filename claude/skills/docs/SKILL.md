---
description: 実装完了後、コードレビュー後に適用。変更内容に応じてドキュメント（CLAUDE.md, skills, rules）の更新が必要か確認し、必要であれば更新する。
---

# ドキュメント更新チェック

実装者の「自分はわかっているから不要」というバイアスを排除するため、サブエージェントに委譲して第三者視点で評価する。

## 実行手順

1. 今回のセッションで変更したファイルパスを把握する
2. Task ツールで `general-purpose` サブエージェントを起動し、変更ファイルパスを含めて以下のプロンプトを渡す:

```
ドキュメント更新が必要か評価してください。
実装の経緯は考慮せず、diff とドキュメントだけを見て判断してください。

## 変更ファイル
{変更したファイルパスの一覧}

## 変更内容の把握方法
`git diff --cached` と `git diff` を実行してください。
diff が空の場合は `git log -1 --format="" --name-only` で直近コミットの変更ファイルを確認し、`git diff HEAD~1` で差分を取得してください。
その上で、現在のドキュメント群（CLAUDE.md, skills/, rules/）を読んでください。

## 確認対象

### 1. CLAUDE.md
プロジェクト全体に関わる重要な変更:
- コーディング原則・規約の変更
- 新しいパターンやルールの追加
- 言語使用規則の変更

### 2. Skills（`skills/*/SKILL.md`）
該当するスキルがある場合:
- description の適用タイミングが正確か
- 手順や形式に変更が必要か
- 新しいスキルの追加が必要か

### 3. Rules（`rules/*.md`）
ルールディレクトリがある場合:
- 新しい規約の追加が必要か
- 既存の規約に変更が必要か

## 更新判断基準

**記載する:**
- プロジェクト固有の設計判断とその理由
- 「なぜそうするか」の説明
- 判定フロー（いつ・何を使うか）

**記載しない:**
- Claude が一般知識として持つ標準パターン
- コードや型定義から推測可能な情報
- 一般的な技術説明
- 一時的な実装でパターンとして確立していないもの

## 更新原則
1. **簡潔に**: 実装と二重管理にならないよう、要点のみ記載
2. **最新化**: 古くなった情報・項目はすべて削除
3. **大胆に**: より良い構成が思いついたら積極的に変更

## 出力形式
- 更新が必要なファイル: パス・変更内容を具体的に
- 更新不要の場合: 「更新不要」とだけ回答
```

4. サブエージェントの結果に基づき、ドキュメントを更新する
5. 更新した箇所を簡潔に報告する
